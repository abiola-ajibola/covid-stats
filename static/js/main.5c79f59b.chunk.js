(this["webpackJsonpcoding-challenge"]=this["webpackJsonpcoding-challenge"]||[]).push([[0],{174:function(e,t,a){e.exports=a(366)},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},366:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(8),c=a.n(r),i=(a(179),a(129)),s=a(130),l=a(29),m=a(144),d=a(143),u=(a(180),a(181),function(){return o.a.createElement("header",{className:"container head"},o.a.createElement("div",{className:"item"},o.a.createElement("h1",{className:"big"},"COVID-19"),o.a.createElement("h3",{className:"small"},"Corona Virus Disease 2019 ",o.a.createElement("span",{className:"small-header"},"statistics"))))}),h=(a(182),a(183),function(e){var t=e.data,a=e.image;return o.a.createElement("div",{className:"card-container"},o.a.createElement("article",{className:"news-item"},o.a.createElement("div",null,o.a.createElement("img",{src:a.url,className:"news-image",alt:a.title})),o.a.createElement("h4",null," ",t.title," "),o.a.createElement("p",null," ",t.excerpt," "),o.a.createElement("p",{className:"card-links"},o.a.createElement("a",{href:t.webUrl,target:"_blank",className:"read",rel:"noopener noreferrer"}," Read more... "),o.a.createElement("a",{href:"https://www.".concat(t.provider.domain),target:"_blank",className:"provider-name",rel:"noopener noreferrer"}," ",t.provider.name," "))))}),f=function(e){var t=e.news,a=e.images;return o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"first-group"},t.map((function(e,t){return o.a.createElement(h,{key:t,data:e,image:a[t]})}))))},g=function(e){var t=e.news,a=e.images;return o.a.createElement("aside",{className:"news-container main-item"},o.a.createElement(f,{news:t,images:a}))},p=(a(184),function(e){var t=e.globalBreakdowns,a=e.fetchHistory;return o.a.createElement("main",{className:"board-container main-item"},o.a.createElement("div",{className:"board-item"},o.a.createElement("div",{className:"stat"},o.a.createElement("div",{className:"flag-title"},"Flag"),o.a.createElement("div",{className:"country"},"Country"),o.a.createElement("div",{className:"confirmed"},"Confirmed"),o.a.createElement("div",{className:"recovered"},"Recovered"),o.a.createElement("div",{className:"death"},"Death"))),t.map((function(e,t){return o.a.createElement(n.Fragment,{key:e.location.countryOrRegion},o.a.createElement("div",{className:"board-item",onClick:function(){return a(e.location.isoCode)}},o.a.createElement("div",{className:"stat"},o.a.createElement("img",{className:"flag",src:"https://www.countryflags.io/".concat(e.location.isoCode,"/flat/64.png"),alt:"flag"}),o.a.createElement("div",{className:"country"},e.location.countryOrRegion),o.a.createElement("div",{className:"confirmed"},"".concat(e.totalConfirmedCases),o.a.createElement("span",{id:"plus"}," + ".concat(e.newlyConfirmedCases))),o.a.createElement("div",{className:"recovered"},"".concat(e.totalRecoveredCases),o.a.createElement("span",{id:"plus"}," + ".concat(e.newlyRecoveredCases))),o.a.createElement("div",{className:"death"},"".concat(e.totalDeaths),o.a.createElement("span",{id:"plus"}," + ".concat(e.newDeaths))))))})))}),v=(a(185),function(e){var t=e.onChange;return o.a.createElement("input",{className:"input",type:"search",placeholder:"Search Countries",onChange:t})}),E=a(9),w=400,y=450;window.innerWidth<850&&(w=320,y=300);var b=function(e){var t=e.close,a=e.graphData,n=e.countryName;return o.a.createElement("div",null,o.a.createElement("button",{onClick:t},"close"),o.a.createElement(E.e,{width:"100%",height:y},o.a.createElement(E.d,{height:w,data:a,margin:{top:5,right:15,bottom:5,left:15}},o.a.createElement(E.c,{type:"monotone",dataKey:"confirmed",dot:!1,stroke:"red"}),o.a.createElement(E.c,{type:"monotone",dataKey:"deaths",dot:!1,stroke:"black"}),o.a.createElement(E.c,{type:"monotone",dataKey:"recovered",dot:!1,stroke:"green"}),o.a.createElement(E.g,{dataKey:"date"},o.a.createElement(E.a,{value:n,offset:300,position:"top"})),o.a.createElement(E.h,null),o.a.createElement(E.b,null),o.a.createElement(E.f,null))))},N=a(372),k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){fetch("https://api.smartable.ai/coronavirus/stats/global",{method:"get",headers:{"content-type":"application/json","Subscription-Key":"d383a676794343deab023ff0a5a7f2e5"}}).then((function(e){return e.json()})).then((function(e){return n.setState({globalHistory:e.stats.history,globalBreakdowns:e.stats.breakdowns,filteredBreakdowns:e.stats.breakdowns})})),fetch("https://api.smartable.ai/coronavirus/news/global",{method:"get",headers:{"content-type":"application/json","Subscription-Key":"d383a676794343deab023ff0a5a7f2e5"}}).then((function(e){return e.json()})).then((function(e){return e.news})).then((function(e){var t;t=e.map((function(e){return null===e.images?{url:"",title:""}:e.images[0]})),n.setState({news:e,images:t})}))},n.state={globalHistory:[],countryHistory:[],globalBreakdowns:[],filteredBreakdowns:[],news:[],countryName:"",images:[],searchfield:"",openModal:!1},n.handleInput=n.handleInput.bind(Object(l.a)(n)),n.fetchHistory=n.fetchHistory.bind(Object(l.a)(n)),n.closeModal=n.closeModal.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"handleInput",value:function(e){this.setState({searchfield:e.target.value})}},{key:"fetchHistory",value:function(e){var t=this;null!==e?(console.log("Preparing to fetch: ",e),this.setState({openModal:!0}),console.log("Fetching",e),fetch("https://api.smartable.ai/coronavirus/stats/".concat(e),{method:"get",headers:{"content-type":"application/json","Subscription-Key":"d383a676794343deab023ff0a5a7f2e5"}}).then((function(e){return e.json()})).then((function(e){return t.setState({countryName:e.location.countryOrRegion}),e.stats})).then((function(e){return e.history})).then((function(e){var a=e.map((function(e){return Object.assign({},e,{date:new Date(e.date).toDateString().slice(4,10)})}));t.setState((function(e){return{countryHistory:a}}))})).catch((function(e){return console.log("Error!",e)}))):alert("Sorry! data not available :(")}},{key:"closeModal",value:function(){this.setState({openModal:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.news,r=t.images,c=t.openModal,i=t.countryHistory,s=this.state.globalBreakdowns.filter((function(t){return t.location.countryOrRegion.toLocaleLowerCase().includes(e.state.searchfield.toLocaleLowerCase())}));return o.a.createElement(n.Fragment,null,o.a.createElement(u,null),o.a.createElement(N.a,{open:c,onClose:this.closeModal,children:o.a.createElement("div",{className:"modal-container"},o.a.createElement(b,{graphData:i,close:this.closeModal,countryName:this.state.countryName}))}),o.a.createElement(v,{onChange:this.handleInput}),o.a.createElement("div",{className:"main-container"},o.a.createElement(p,{globalBreakdowns:s,fetchHistory:this.fetchHistory}),o.a.createElement(g,{news:a,images:r})))}}]),a}(o.a.Component),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(k,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/covid-stats",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/covid-stats","/service-worker.js");C?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):S(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):S(t,e)}))}}()}},[[174,1,2]]]);
//# sourceMappingURL=main.5c79f59b.chunk.js.map